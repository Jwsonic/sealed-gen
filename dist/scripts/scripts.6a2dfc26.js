"use strict";function httpGet(a,b){return a.get(b).then(function(a){return a.data})}var app=angular.module("sealedGenApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){console.log("hello"),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{factions:["$http",function(a){return httpGet(a,"factions.json")}],cards:["$http",function(a){return httpGet(a,"cards.json")}]}}).otherwise({redirectTo:"/"})}]).config(["$compileProvider",function(a){console.log("hello"),a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|blob|chrome-extension):/)}]);angular.module("sealedGenApp").controller("MainCtrl",["$scope","factions","cards",function(a,b,c){function d(a){var b='<?xml version="1.0" encoding="UTF-8"?>\n<cockatrice_deck version="1">\n<deckname></deckname>\n<comments></comments>\n<zone name="main"></zone>\n<zone name="side">\n%s</zone>\n</cockatrice_deck>',c=_.countBy(a,function(a){return a}),d=_.map(c,function(a,b){return sprintf('<card number="%s" price="0" name="%s"/>\n',a,b)}).join("");return new Blob([sprintf(b,d)],{type:"text/xml"})}function e(a){var b=[];b.push(h(0==g(0,8)?a.mythic:a.rare));for(var c=0;3>c;c++)b.push(h(a.uncommon));for(var c=0;10>c;c++)b.push(h(a.common));return b.push(h(a.land)),b}function f(a){var b=[];b.push(h(a.promo));for(var c=0;3>c;c++)b.push(h(a.uncommon));for(var c=0;10>c;c++)b.push(h(a.common));return b.push(h(a.land)),b}function g(a,b){return Math.floor(Math.random()*(b-a))+a}function h(a){return a[g(0,a.length)]}a.factions=b,a.cards=c,a.faction=a.factions[0],a.buildPool=function(){a.buildingPool=!0;for(var b=[],c=0;5>c;c++)Array.prototype.push.apply(b,e(a.cards));Array.prototype.push.apply(b,f(a.faction.cards));var g=d(b);a.buildingPool=!1,a.poolUrl=(window.URL||window.webkitURL).createObjectURL(g),console.log(a.poolUrl),a.poolName=a.faction.name+".cod"}}]);